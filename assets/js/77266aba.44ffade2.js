"use strict";(self.webpackChunksnowflake_promise_website=self.webpackChunksnowflake_promise_website||[]).push([[6861],{850:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"api-reference","title":"API Reference","description":"The promisifyConnection Function","source":"@site/docs/api-reference.mdx","sourceDirName":".","slug":"/api-reference","permalink":"/snowflake-promise/docs/api-reference","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"API Reference"},"sidebar":"tutorialSidebar","previous":{"title":"Getting Started","permalink":"/snowflake-promise/docs/getting-started"},"next":{"title":"Examples","permalink":"/snowflake-promise/docs/examples/"}}');var t=i(4848),c=i(8453);const o={sidebar_position:3,title:"API Reference"},r=void 0,l={},a=[{value:"The <code>promisifyConnection</code> Function",id:"the-promisifyconnection-function",level:2},{value:"TypeScript signature",id:"typescript-signature",level:4},{value:"Usage",id:"usage",level:4},{value:"<code>Connection</code> Methods That Are Promisified by This Library",id:"connection-methods-that-are-promisified-by-this-library",level:2},{value:"<code>connect</code>",id:"connect",level:3},{value:"TypeScript signature",id:"typescript-signature-1",level:4},{value:"Usage",id:"usage-1",level:4},{value:"<code>connectAsync</code>",id:"connectasync",level:3},{value:"TypeScript signature",id:"typescript-signature-2",level:4},{value:"Usage",id:"usage-2",level:4},{value:"<code>destroy</code>",id:"destroy",level:3},{value:"TypeScript signature",id:"typescript-signature-3",level:4},{value:"Usage",id:"usage-3",level:4},{value:"<code>execute</code>",id:"execute",level:3},{value:"TypeScript signature",id:"typescript-signature-4",level:4},{value:"Usage",id:"usage-4",level:4},{value:"Statement Methods",id:"statement-methods",level:2},{value:"<code>cancel</code>",id:"cancel",level:3},{value:"TypeScript signature",id:"typescript-signature-5",level:4},{value:"Usage",id:"usage-5",level:4}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.h2,{id:"the-promisifyconnection-function",children:["The ",(0,t.jsx)(n.code,{children:"promisifyConnection"})," Function"]}),"\n",(0,t.jsxs)(n.p,{children:["This library exports a single function: ",(0,t.jsx)(n.code,{children:"promisifyConnection"}),". It takes a Snowflake ",(0,t.jsx)(n.code,{children:"Connection"})," object and returns a ",(0,t.jsx)(n.code,{children:"PromisifiedConnection"})," with Promise support added to all callback-based methods."]}),"\n",(0,t.jsx)(n.p,{children:"Once promisified, you use the connection exactly like the standard Snowflake SDK, but with the option to use async/await instead of callbacks."}),"\n",(0,t.jsx)(n.h4,{id:"typescript-signature",children:"TypeScript signature"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'import type { Connection } from "snowflake-sdk";\n\nfunction promisifyConnection(connection: Connection): PromisifiedConnection;\n'})}),"\n",(0,t.jsx)(n.h4,{id:"usage",children:"Usage"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'import snowflake from "snowflake-sdk";\nimport { promisifyConnection } from "snowflake-promise";\n\nconst connection = promisifyConnection(\n  snowflake.createConnection({ /* your config */ })\n);\n'})}),"\n",(0,t.jsxs)(n.p,{children:["The following ",(0,t.jsx)(n.code,{children:"Connection"})," methods are augmented with Promise support:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#connect",children:(0,t.jsx)(n.code,{children:"connect"})})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#connectasync",children:(0,t.jsx)(n.code,{children:"connectAsync"})})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#destroy",children:(0,t.jsx)(n.code,{children:"destroy"})})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#execute",children:(0,t.jsx)(n.code,{children:"execute"})})}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Any ",(0,t.jsx)(n.code,{children:"RowStatement"})," objects returned from promisified methods will have Promise support added to the following method:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"#cancel",children:(0,t.jsx)(n.code,{children:"cancel"})})}),"\n"]}),"\n",(0,t.jsxs)(n.h2,{id:"connection-methods-that-are-promisified-by-this-library",children:[(0,t.jsx)(n.code,{children:"Connection"})," Methods That Are Promisified by This Library"]}),"\n",(0,t.jsx)(n.p,{children:"The methods below are enhanced with Promise support while still allowing callback usage."}),"\n",(0,t.jsxs)(n.admonition,{type:"tip",children:[(0,t.jsx)(n.p,{children:"The Promise functionality activates automatically when no callback is provided. If a callback is provided, the original, non-promisified, callback-based method is called."}),(0,t.jsx)(n.p,{children:"That means that your callback-based code will continue to work, even with a promisified connection."})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"connect",children:(0,t.jsx)(n.code,{children:"connect"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Link: ",(0,t.jsx)(n.a,{href:"https://docs.snowflake.com/en/developer-guide/node-js/nodejs-driver-connect#creating-a-single-connection",children:"Snowflake SDK Documentation for Connections"})]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"typescript-signature-1",children:"TypeScript signature"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// original SDK signature\nconnect(callback: ConnectionCallback): void;\n\n// promisified signature\nconnect(): Promise<Connection>;\n"})}),"\n",(0,t.jsx)(n.h4,{id:"usage-1",children:"Usage"}),"\n",(0,t.jsxs)(n.p,{children:["After creating a ",(0,t.jsx)(n.code,{children:"Connection"}),", use its ",(0,t.jsx)(n.code,{children:"connect"})," method to connect to Snowflake."]}),"\n",(0,t.jsxs)(n.p,{children:["When using the traditional SDK ",(0,t.jsx)(n.code,{children:"connect"})," method, you pass a callback for connection readiness, and you can call ",(0,t.jsx)(n.code,{children:"connection.isValidAsync()"})," to check for connection status."]}),"\n",(0,t.jsxs)(n.p,{children:["When using Promises, you won\u2019t need to call ",(0,t.jsx)(n.code,{children:"connection.isValidAsync()"})," to check this, because once the ",(0,t.jsx)(n.code,{children:"Promise"})," resolves, the connection is ready."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"connectasync",children:(0,t.jsx)(n.code,{children:"connectAsync"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Link: ",(0,t.jsx)(n.a,{href:"https://docs.snowflake.com/en/developer-guide/node-js/nodejs-driver-connect#creating-a-single-connection",children:"Snowflake SDK Documentation for Connections"})]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"typescript-signature-2",children:"TypeScript signature"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// original SDK signature\nconnectAsync(callback: ConnectionCallback): Promise<void>;\n\n// promisified signature\nconnectAsync(): Promise<Connection>;\n"})}),"\n",(0,t.jsx)(n.h4,{id:"usage-2",children:"Usage"}),"\n",(0,t.jsxs)(n.p,{children:["For authentication types like browser-based SSO (",(0,t.jsx)(n.code,{children:"EXTERNALBROWSER"}),"), you need to use ",(0,t.jsx)(n.code,{children:"connectAsync"})," instead of ",(0,t.jsx)(n.code,{children:"connect"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:["It works the same way as the standard ",(0,t.jsx)(n.code,{children:"connect"})," method."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"destroy",children:(0,t.jsx)(n.code,{children:"destroy"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Link: ",(0,t.jsx)(n.a,{href:"https://docs.snowflake.com/en/developer-guide/node-js/nodejs-driver-connect#terminating-a-connection",children:"Snowflake SDK documentation for terminating a connection"})]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"typescript-signature-3",children:"TypeScript signature"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// original SDK signature\ndestroy(fn: ConnectionCallback): void;\n\n// promisified signature\ndestroy(): Promise<void>;\n"})}),"\n",(0,t.jsx)(n.h4,{id:"usage-3",children:"Usage"}),"\n",(0,t.jsxs)(n.p,{children:["Use the ",(0,t.jsx)(n.code,{children:"destroy"})," method to end a session and destroy a connection, without waiting for any pending operations to complete."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"execute",children:(0,t.jsx)(n.code,{children:"execute"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Link: ",(0,t.jsx)(n.a,{href:"https://docs.snowflake.com/en/developer-guide/node-js/nodejs-driver-execute",children:"Snowflake SDK Documentation for Executing SQL Statements"})]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"typescript-signature-4",children:"TypeScript signature"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// original SDK signature\nexecute(options: StatementOption): RowStatement | FileAndStageBindStatement;\n\n// promisified signature\nexecute<RowType>(\n  options: StatementOptionWithoutCallback,\n): { statement: RowStatement; resultsPromise: Promise<RowType[]> };\n\n// Note: FileAndStageBindStatement is a subclass of RowStatement.\n"})}),"\n",(0,t.jsx)(n.h4,{id:"usage-4",children:"Usage"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"execute"})," is the main method for executing SQL statements in the Snowflake SDK."]}),"\n",(0,t.jsxs)(n.p,{children:["Use ",(0,t.jsx)(n.code,{children:"execute"})," to run SQL queries. It returns an object with two properties:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"const { resultsPromise, statement } = connection.execute({ sqlText });\nconst results = await resultsPromise;\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"resultsPromise"}),": Await this to get your query results."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"statement"}),": Use this to manage or cancel long-running queries. You can omit or ignore this if you don\u2019t need it. See the ",(0,t.jsx)(n.a,{href:"../examples/executing-queries/query-example-3",children:"canceling queries example"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.admonition,{type:"info",children:[(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.strong,{children:["Why doesn\u2019t ",(0,t.jsx)(n.code,{children:"execute"})," return results directly?"]})}),(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"execute"})," method returns both a statement object and a promise for the results. This gives you immediate access to the statement for operations like cancellation, while still allowing you to await the results when needed."]}),(0,t.jsx)(n.p,{children:"This design preserves all the functionality of the underlying Snowflake SDK."})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"statement-methods",children:"Statement Methods"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"statement"})," object returned by ",(0,t.jsx)(n.code,{children:"execute"})," also has Promise support added to its callback-based methods."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"cancel",children:(0,t.jsx)(n.code,{children:"cancel"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Link: ",(0,t.jsx)(n.a,{href:"https://docs.snowflake.com/en/developer-guide/node-js/nodejs-driver-execute#canceling-statements",children:"Snowflake SDK documentation for canceling a statement"})]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"typescript-signature-5",children:"TypeScript signature"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// original SDK signature\ncancel(callback?: StatementCallback): void;\n\n// promisified signature\ncancel(): Promise<void>;\n"})}),"\n",(0,t.jsx)(n.h4,{id:"usage-5",children:"Usage"}),"\n",(0,t.jsxs)(n.p,{children:["Use the ",(0,t.jsx)(n.code,{children:"cancel"})," method to cancel a running statement."]}),"\n",(0,t.jsx)(n.hr,{})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>r});var s=i(6540);const t={},c=s.createContext(t);function o(e){const n=s.useContext(c);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(c.Provider,{value:n},e.children)}}}]);